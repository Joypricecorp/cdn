/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.4
 *
 */(function(e,t,n,r){var i=e(t);e.fn.lazyload=function(n){function s(){var t=0;o.each(function(){var n=e(this);if(a.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,a)&&!e.leftofbegin(this,a))if(!e.belowthefold(this,a)&&!e.rightoffold(this,a)){n.trigger("appear");t=0}else if(++t>a.failure_limit)return!1})}var o=this,u,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};if(n){if(r!==n.failurelimit){n.failure_limit=n.failurelimit;delete n.failurelimit}if(r!==n.effectspeed){n.effect_speed=n.effectspeed;delete n.effectspeed}e.extend(a,n)}u=a.container===r||a.container===t?i:e(a.container);0===a.event.indexOf("scroll")&&u.bind(a.event,function(e){return s()});this.each(function(){var t=this,n=e(t),r=n.offset();t.loaded=!1;var i=n.position(),s=e('<div class="jpx-spinner"/>').appendTo(n.parent(a.spinparent||null)).css({position:"absolute",top:i.top,left:i.left,width:n.outerWidth(!0),height:n.outerHeight(!0)});n.one("appear",function(){if(!this.loaded){if(a.appear){var r=o.length;a.appear.call(t,r,a)}e("<img />").bind("load",function(){n.hide().css("background-image",'url("'+n.data(a.data_attribute)+'")')[a.effect](a.effect_speed);t.loaded=!0;a.spindelay&&a.spindelay>0?setTimeout(function(){s.fadeOut(2e3,function(){s.remove()})},a.spindelay):s.fadeOut(2e3,function(){s.remove()});var r=e.grep(o,function(e){return!e.loaded});o=e(r);if(a.load){var i=o.length;a.load.call(t,i,a)}}).attr("src",n.data(a.data_attribute))}});0!==a.event.indexOf("scroll")&&n.bind(a.event,function(e){t.loaded||n.trigger("appear")})});i.bind("resize",function(e){s()});/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&i.bind("pageshow",function(t){t.originalEvent.persisted&&o.each(function(){e(this).trigger("appear")})});e(t).load(function(){s()});this.update=s;return this};e.belowthefold=function(n,s){var o;s.container===r||s.container===t?o=i.height()+i.scrollTop():o=e(s.container).offset().top+e(s.container).height();return o<=e(n).offset().top-s.threshold};e.rightoffold=function(n,s){var o;s.container===r||s.container===t?o=i.width()+i.scrollLeft():o=e(s.container).offset().left+e(s.container).width();return o<=e(n).offset().left-s.threshold};e.abovethetop=function(n,s){var o;s.container===r||s.container===t?o=i.scrollTop():o=e(s.container).offset().top;return o>=e(n).offset().top+s.threshold+e(n).height()};e.leftofbegin=function(n,s){var o;s.container===r||s.container===t?o=i.scrollLeft():o=e(s.container).offset().left;return o>=e(n).offset().left+s.threshold+e(n).width()};e.inviewport=function(t,n){return!e.rightoffold(t,n)&&!e.leftofbegin(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)};e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})})(jQuery,window,document);