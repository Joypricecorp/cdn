/**
 *   ComboView
 */Ext.define("Ext.ux.ComboView",{extend:"Ext.view.View",alias:"widget.comboview",maxLength:18,removeOnDblClick:!0,inputLength:40,itemSelector:"li.x-boxselect-item",overItemCls:"selected",initComponent:function(){var e=this,t=e.field;e.closeCls="x-boxselect-item-close";if(!e.tpl){var n=t.displayField,r=t.descField,i=t.iconClsField;e.tpl=new Ext.XTemplate('<ul class="x-boxselect-list {fieldCls} {typeCls}">',"{[this.empty(values)]}",'<tpl for=".">','<li class="x-boxselect-item ',i?"x-boxselect-icon {"+i+'}"':'"',r?'data-qtitle="{'+n+'}" data-qtip="{'+r+'}">':">",'<div class="x-tab-close-btn ',e.closeCls,'"></div>','<div class="x-boxselect-item-text">{[this.ellipsis(values.',n,")]}</div>",'<div class="x-tab-close-btn ',e.closeCls,'"></div>',"</li>","</tpl>",'<li class="x-boxselect-input"><input style="width:'+e.inputLength+'px;"/></li>',"</ul>",{compiled:!0,disableFormats:!0,length:e.maxLength,ellipsis:function(e){return Ext.String.ellipsis(e,this.length)},emptyText:e.emptyText,empty:function(e){return'<span class="empty">'+(e.length?"":this.emptyText)+"</span>"}})}delete e.emptyText;e.callParent(arguments)},renderSelectors:{inputEl:"input",emptyEl:"span.empty"},getFocusEl:function(){return this.inputEl},addFocusListener:function(e){var t=this;if(!t.focusListenerAdded||e){t.callParent();var n=t.getFocusEl();if(n){n.on({focus:t.field.onFocus,blur:t.field.onBlur,scope:t.field});t.getEl().on({focus:t.field.onFocus,scope:t.field})}}},onItemClick:function(e,t,n,r,i){if(r.getTarget("."+this.closeCls))return this.onDataChange(e,"remove");this.highlightItem(t)},onItemDblClick:function(e,t,n,r,i){this.removeOnDblClick&&this.onDataChange(e,"remove")},onDataChange:function(e,t){var n=this;if(n.field.readOnly||n.field.disabled)return;t=="remove"&&n.store.remove(e);n.field.setStoreValues()},listeners:{refresh:{fn:function(){this.applyRenderSelectors();this.addFocusListener(!0)}}},onDestroy:function(){var e=this,t;(t=e.getFocusEl())&&t.clearListeners()}});