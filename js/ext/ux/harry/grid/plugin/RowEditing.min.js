/**
 * @class Ext.ux.grid.plugin.RowEditing
 * @extends Ext.grid.plugin.RowEditing
 * 
 * The Initial Developer of the Original Code is tz (atian25@qq.com)
 * @see http://www.sencha.com/forum/showthread.php?131482-Ext.ux.RowEditing-add-some-usefull-features
 * 
 * @author Harald Hanek (c) 2011-2012
 * @license http://harrydeluxe.mit-license.org
 */Ext.define("Ext.ux.grid.plugin.RowEditing",{extend:"Ext.grid.plugin.RowEditing",alias:"plugin.ux.rowediting",removePhantomsOnCancel:!0,init:function(e){var t=this;t.addEvents("canceledit");t.callParent(arguments);e.addEvents("canceledit");e.relayEvents(t,["canceledit"]);t.on("edit",function(e,t){delete t.record._blank})},startAdd:function(e,t){var n=this,r=n.grid.store.model.create(e);r._blank=!0;t=t&&t!=-1&&parseInt(t+1)<=parseInt(n.grid.store.getCount())?t:t==-1?parseInt(n.grid.store.getCount()):0;var i=n.grid.store.autoSync;n.grid.store.autoSync=!1;n.grid.store.insert(t,r);n.grid.store.autoSync=i;n.startEdit(t,0);n.editor.floatingButtons&&n.editor.form.isValid()&&n.editor.floatingButtons.child("#update").setDisabled(!1)},startEditByClick:function(){var e=this;if(!e.editing||e.clicksToMoveEditor===e.clicksToEdit){e.context&&e.context.record._blank&&e.cancelEdit();e.callParent(arguments)}},moveEditorByClick:function(){var e=this;if(e.editing){e.context&&e.context.record._blank&&e.cancelEdit();e.editing=!1;e.superclass.onCellClick.apply(e,arguments)}},cancelEdit:function(){var e=this;if(e.editing){e.getEditor().cancelEdit();e.callParent(arguments);e.fireEvent("canceledit",e.context);e.removePhantomsOnCancel&&(e.context.record._blank&&e.context.record.store?e.context.store.remove(e.context.record):e.context.record.reject())}}});